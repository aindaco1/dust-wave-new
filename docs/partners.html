<!doctype html>
<html class="h-100" lang="en">

  <head>
      <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1,shrink-to-fit=no">
  
    <meta name="description" content="Dust Wave film collective website">
  
  <link rel="apple-touch-icon" sizes="180x180" href="/img/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/img/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/img/favicon-16x16.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/img/favicon.png">
  <link rel="preconnect" href="https://www.youtube-nocookie.com" crossorigin>
  <link rel="preconnect" href="https://www.youtube.com" crossorigin>
  <link rel="preconnect" href="https://i.ytimg.com" crossorigin>
  <link rel="preconnect" href="https://www.google.com" crossorigin>
  <link rel="preconnect" href="https://stitcher.simplecastaudio.com" crossorigin>
  <link rel="preconnect" href="https://mcdn.podbean.com" crossorigin>
  <link rel="preconnect" href="https://traffic.megaphone.fm" crossorigin>
  <link rel="preconnect" href="https://dts.podtrac.com" crossorigin>
  <link rel="dns-prefetch" href="https://www.youtube-nocookie.com">
  <link rel="dns-prefetch" href="https://i.ytimg.com">
  <meta name="author" content="Dust Wave">
  <meta name="generator" content="Eleventy v2.0.1">
  <meta name="HandheldFriendly" content="true">

  
    <meta itemprop="image" content="/img/dust-wave-square-padding.png">
    <meta property="og:image" content="/img/dust-wave-square-padding.png">
    <meta name="twitter:image" content="/img/dust-wave-square-padding.png">
  

  <title>Partners</title>
  <link rel="stylesheet" href="/css/theme.min.css">
  <link rel="stylesheet" href="https://use.typekit.net/hoj2yet.css">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" rel="stylesheet">
  <link href="//cdn-images.mailchimp.com/embedcode/classic-071822.css" rel="stylesheet" type="text/css">



  </head>
  <div class="partners-background"></div>
  <body class="partners" data-bs-spy="scroll" data-bs-target="#navScroll">
    
    <nav id="navScroll" class="navbar navbar-expand-lg navbar-light white-text container py-lg-3 pb-0 px-vw-6" tabindex="0">
  <div class="container d-flex flex-column d-lg-flex flex-lg-row justify-content-between align-items-center w-100">

    
    
    <div class="d-lg-none w-100 text-center mb-2">
      <h1 class="display-huge mt-3 mb-3">
        <a href="/" class="text-white text-decoration-none">DUST WAVE</a>
      </h1>
    </div>
    

    <div class="navbar-brand d-none d-lg-block">
      <a class="navbar-brand pe-md-4 fs-4 col-12 col-md-auto text-center" href="/index.html">
  <img src="/img/dust-wave-square.png" class="bi bi-boxes mb-1 drop-shadow" height="35" width="38">

  
</a>

    </div>

    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarContent" aria-controls="navbarContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="navbarContent">
  <ul class="navbar-nav mx-auto">
    <li class="nav-item">
        <a class="nav-link initialism white-text" href="/about.html" aria-label="About">
          About
        </a>
    </li>
    <li class="nav-item">
        <a class="nav-link initialism white-text" href="/news.html" aria-label="News">
          News
        </a>
    </li>
    <li class="nav-item">
        <a class="nav-link initialism white-text" href="/partners.html" aria-label="Partners">
          Partners
        </a>
    </li>
    <li class="nav-item">
        <a class="nav-link initialism white-text" href="/contact.html" aria-label="Contact Us">
          Contact
        </a>
    </li>
    <li class="nav-item">
        <a class="nav-link initialism white-text" href="https://shop.dustwave.xyz" target="_blank" aria-label="Shop">
          Shop
        </a>
    </li>
  </ul>
</div>
  </div>
</nav>
      <main>
        <div class="container">
  <div class="row d-flex justify-content-center">
    <div class="col-12 text-center py-vh-3">
      <h1>Partners</h1>
    </div>
    <div class="col-12 text-center py-vh-3">
      <div class="row g-2">
        <div class="col-lg-6 col-md-12 mb-6 mb-lg-0">
          <div class="image_wrapper">
            <a href="https://www.fusionnm.org" class="link-fancy mobile-only" target="_blank"><img src="/img/partners/fusion.png" class="w-100 shadow-1-strong rounded mb-2" alt="FUSION"></a>
            <div class="overlay overlay_3 overlay-partner white-text">
              <h3 class="partner-title">FUSION</h3>
              <br>
              <h3 class="partner-social"><a href="https://www.instagram.com/fusiontheatrecompany" class="link-fancy" target="_blank"><i class="fa-brands fa-instagram" aria-hidden="true"></i></a>
              &nbsp;
              <a href="https://www.fusionnm.org" class="link-fancy" target="_blank"><i class="fa-solid fa-globe" aria-hidden="true"></i></a></h3>
            </div>
          </div>
          <div class="image_wrapper">
            <a href="https://allthingsmood.com" class="link-fancy mobile-only" target="_blank"><img src="/img/partners/mood.png" class="w-100 shadow-1-strong rounded mb-2" alt="MOOD"></a>
            <div class="overlay overlay_3 overlay-partner white-text">
              <h3 class="partner-title">MOOD</h3>
              <br>
              <h3 class="partner-social"><a href="https://www.instagram.com/allthings_mood" class="link-fancy" target="_blank"><i class="fa-brands fa-instagram" aria-hidden="true"></i></a>
              &nbsp;
              <a href="https://allthingsmood.com" class="link-fancy" target="_blank"><i class="fa-solid fa-globe" aria-hidden="true"></i></a></h3>
            </div>
          </div>
          <div class="image_wrapper">
            <a href="https://www.cabq.gov/artsculture/public-art" class="link-fancy mobile-only" target="_blank"><img src="/img/partners/cabq-public-arts.png" class="w-100 shadow-1-strong rounded mb-2" alt="City of Albuquerque Public Art"></a>
            <div class="overlay overlay_3 overlay-partner white-text">
              <h3 class="partner-title">City of Albuquerque Public Art</h3>
              <br>
              <h3 class="partner-social"><a href="https://www.instagram.com/abqpublicart" class="link-fancy" target="_blank"><i class="fa-brands fa-instagram" aria-hidden="true"></i></a>
              &nbsp;
              <a href="https://www.cabq.gov/artsculture/public-art" class="link-fancy" target="_blank"><i class="fa-solid fa-globe" aria-hidden="true"></i></a></h3>
            </div>
          </div>
          <div class="image_wrapper">
            <a href="https://abqfmi.com" class="link-fancy mobile-only" target="_blank"><img src="/img/partners/afmi.png" class="w-100 shadow-1-strong rounded mb-2" alt="AFMI"></a>
            <div class="overlay overlay_3 overlay-partner white-text">
              <h3 class="partner-title">Albuquerque Film & Media Incubator</h3>
              <br>
              <h3 class="partner-social"><a href="https://www.instagram.com/abqfminc" class="link-fancy" target="_blank"><i class="fa-brands fa-instagram" aria-hidden="true"></i></a>
              &nbsp;
              <a href="https://abqfmi.com" class="link-fancy" target="_blank"><i class="fa-solid fa-globe" aria-hidden="true"></i></a></h3>
            </div>
          </div>
          <div class="image_wrapper">
            <a href="https://nmarts.org" class="link-fancy mobile-only" target="_blank"><img src="/img/partners/nmarts.png" class="w-100 shadow-1-strong rounded mb-2" alt="New Mexico Arts"></a>
            <div class="overlay overlay_3 overlay-partner white-text">
              <h3 class="partner-title">New Mexico Arts</h3>
              <br>
              <h3 class="partner-social"><a href="https://www.instagram.com/newmexicoarts" class="link-fancy" target="_blank"><i class="fa-brands fa-instagram" aria-hidden="true"></i></a>
              &nbsp;
              <a href="https://nmarts.org" class="link-fancy" target="_blank"><i class="fa-solid fa-globe" aria-hidden="true"></i></a></h3>
            </div>
          </div>
          <div class="image_wrapper">
            <a href="https://www.sopapillaproductions.com" class="link-fancy mobile-only" target="_blank"><img src="/img/partners/sopapilla.png" class="w-100 shadow-1-strong rounded mb-2" alt="Sopapilla Productions"></a>
            <div class="overlay overlay_3 overlay-partner white-text">
              <h3 class="partner-title">Sopapilla Productions</h3>
              <br>
              <h3 class="partner-social"><a href="https://www.instagram.com/sopapillaproductions" class="link-fancy" target="_blank"><i class="fa-brands fa-instagram" aria-hidden="true"></i></a>
              &nbsp;
              <a href="https://www.sopapillaproductions.com" class="link-fancy" target="_blank"><i class="fa-solid fa-globe" aria-hidden="true"></i></a></h3>
            </div>
          </div>
          <div class="image_wrapper">
            <a href="https://metalthebrand.com" class="link-fancy mobile-only" target="_blank"><img src="/img/partners/metal.png" class="w-100 shadow-1-strong rounded mb-2" alt="Metal the Brand"></a>
            <div class="overlay overlay_3 overlay-partner white-text">
              <h3 class="partner-title">Metal the Brand</h3>
              <br>
              <h3 class="partner-social"><a href="https://www.instagram.com/metal_the_brand" class="link-fancy" target="_blank"><i class="fa-brands fa-instagram" aria-hidden="true"></i></a>
              &nbsp;
              <a href="https://metalthebrand.com" class="link-fancy" target="_blank"><i class="fa-solid fa-globe" aria-hidden="true"></i></a></h3>
            </div>
          </div>
          <div class="image_wrapper">
            <a href="https://www.guildcinema.com" class="link-fancy mobile-only" target="_blank"><img src="/img/partners/guild.png" class="w-100 shadow-1-strong rounded mb-2" alt="Guild Cinema"></a>
            <div class="overlay overlay_3 overlay-partner white-text">
              <h3 class="partner-title">Guild Cinema</h3>
              <br>
              <h3 class="partner-social"><a href="https://www.instagram.com/guildcinema/" class="link-fancy" target="_blank"><i class="fa-brands fa-instagram" aria-hidden="true"></i></a>
              &nbsp;
              <a href="https://www.guildcinema.com" class="link-fancy" target="_blank"><i class="fa-solid fa-globe" aria-hidden="true"></i></a></h3>
            </div>
          </div>
          <div class="image_wrapper">
            <a href="https://www.johnnyboards.com" class="link-fancy mobile-only" target="_blank"><img src="/img/partners/johnnyboards.png" class="w-100 shadow-1-strong rounded mb-2" alt="Johnny Boards"></a>
            <div class="overlay overlay_3 overlay-partner white-text">
              <h3 class="partner-title">JohnnyBoards</h3>
              <br>
              <h3 class="partner-social"><a href="https://www.instagram.com/johnnyboards_nm" class="link-fancy" target="_blank"><i class="fa-brands fa-instagram" aria-hidden="true"></i></a>
              &nbsp;
              <a href="https://www.johnnyboards.com" class="link-fancy" target="_blank"><i class="fa-solid fa-globe" aria-hidden="true"></i></a></h3>
            </div>
          </div>
        </div> 
        <div class="col-lg-6 mb-6 mb-lg-0">
          <div class="image_wrapper">
            <a href="https://www.516arts.org/opportunities/fulcrum-fund" class="link-fancy mobile-only" target="_blank"><img src="/img/partners/fulcrum.png" class="w-100 shadow-1-strong rounded mb-2" alt="Fulcrum Fund"></a>
            <div class="overlay overlay_3 overlay-partner white-text">
              <h3 class="partner-title">Fulcrum Fund</h3>
              <br>
              <h3 class="partner-social"><a href="https://www.instagram.com/516_arts" class="link-fancy" target="_blank"><i class="fa-brands fa-instagram" aria-hidden="true"></i></a>
              &nbsp;
              <a href="https://www.516arts.org/opportunities/fulcrum-fund" class="link-fancy" target="_blank"><i class="fa-solid fa-globe" aria-hidden="true"></i></a></h3>
            </div>
          </div>
          <div class="image_wrapper">
            <a href="https://currentsnewmedia.org" class="link-fancy mobile-only" target="_blank"><img src="/img/partners/currents.png" class="w-100 shadow-1-strong rounded mb-2" alt="Current New Media"></a>
            <div class="overlay overlay_3 overlay-partner white-text">
              <h3 class="partner-title">Currents New Media</h3>
              <br>
              <h3 class="partner-social"><a href="https://www.instagram.com/currentsnewmedia" class="link-fancy" target="_blank"><i class="fa-brands fa-instagram" aria-hidden="true"></i></a>
              &nbsp;
              <a href="https://currentsnewmedia.org" class="link-fancy" target="_blank"><i class="fa-solid fa-globe" aria-hidden="true"></i></a></h3>
            </div>
          </div>
          <div class="image_wrapper">
            <a href="https://warholfoundation.org" class="link-fancy mobile-only" target="_blank"><img src="/img/partners/andy-warhol.png" class="w-100 shadow-1-strong rounded mb-2" alt="The Andy Warhol Foundation For the Visual Arts"></a>
            <div class="overlay overlay_3 overlay-partner white-text">
              <h3 class="partner-title">The Andy Warhol Foundation For the Visual Arts</h3>
              <br>
              <h3 class="partner-social"><a href="https://www.instagram.com/warholfoundation" class="link-fancy" target="_blank"><i class="fa-brands fa-instagram" aria-hidden="true"></i></a>
              &nbsp;
              <a href="https://warholfoundation.org" class="link-fancy" target="_blank"><i class="fa-solid fa-globe" aria-hidden="true"></i></a></h3>
            </div>
          </div>
          <div class="image_wrapper">
            <a href="https://www.hotelzazz.com" class="link-fancy mobile-only" target="_blank"><img src="/img/partners/zazz.png" class="w-100 shadow-1-strong rounded mb-2" alt="Hotel Zazz"></a>
            <div class="overlay overlay_3 overlay-partner white-text">
              <h3 class="partner-title">Hotel Zazz</h3>
              <br>
              <h3 class="partner-social"><a href="https://www.instagram.com/hotelzazz" class="link-fancy" target="_blank"><i class="fa-brands fa-instagram" aria-hidden="true"></i></a>
              &nbsp;
              <a href="https://www.hotelzazz.com" class="link-fancy" target="_blank"><i class="fa-solid fa-globe" aria-hidden="true"></i></a></h3>
            </div>
          </div>
          <div class="image_wrapper">
            <a href="https://www.artbeforecomfort.com" class="link-fancy mobile-only" target="_blank"><img src="/img/partners/art-before-comfort.png" class="w-100 shadow-1-strong rounded mb-2" alt="Art Before Comfort"></a>
            <div class="overlay overlay_3 overlay-partner white-text">
              <h3 class="partner-title">Art Before Comfort</h3>
              <br>
              <h3 class="partner-social"><a href="https://www.instagram.com/artbeforecomfort" class="link-fancy" target="_blank"><i class="fa-brands fa-instagram" aria-hidden="true"></i></a>
              &nbsp;
              <a href="https://www.artbeforecomfort.com" class="link-fancy" target="_blank"><i class="fa-solid fa-globe" aria-hidden="true"></i></a></h3>
            </div>
          </div>
          <div class="image_wrapper">
            <a href="https://www.nmdreamteam.org" class="link-fancy mobile-only" target="_blank"><img src="/img/partners/nm-dream-team.png" class="w-100 shadow-1-strong rounded mb-2" alt="NM Dream Team"></a>
            <div class="overlay overlay_3 overlay-partner white-text">
              <h3 class="partner-title">New Mexico Dream Team</h3>
              <br>
              <h3 class="partner-social"><a href="https://www.instagram.com/nm_dreamteam" class="link-fancy" target="_blank"><i class="fa-brands fa-instagram" aria-hidden="true"></i></a>
              &nbsp;
              <a href="https://www.nmdreamteam.org" class="link-fancy" target="_blank"><i class="fa-solid fa-globe" aria-hidden="true"></i></a></h3>
            </div>
          </div>
          <div class="image_wrapper">
            <a href="https://www.vaultstudiosabq.com" class="link-fancy mobile-only" target="_blank"><img src="/img/partners/vault.png" class="w-100 shadow-1-strong rounded mb-2" alt="Vault Studios"></a>
            <div class="overlay overlay_3 overlay-partner white-text">
              <h3 class="partner-title">Vault Studios</h3>
              <br>
              <h3 class="partner-social"><a href="https://www.instagram.com/vaultstudios.abq" class="link-fancy" target="_blank"><i class="fa-brands fa-instagram" aria-hidden="true"></i></a>
              &nbsp;
              <a href="https://www.vaultstudiosabq.com" class="link-fancy" target="_blank"><i class="fa-solid fa-globe" aria-hidden="true"></i></a></h3>
            </div>
          </div>
          <div class="image_wrapper">
            <a href="https://paseoproject.org" class="link-fancy mobile-only" target="_blank"><img src="/img/partners/paseo.png" class="w-100 shadow-1-strong rounded mb-2" alt="The Paseo Project"></a>
            <div class="overlay overlay_3 overlay-partner white-text">
              <h3 class="partner-title">The Paseo Project</h3>
              <br>
              <h3 class="partner-social"><a href="https://www.instagram.com/paseoproject" class="link-fancy" target="_blank"><i class="fa-brands fa-instagram" aria-hidden="true"></i></a>
              &nbsp;
              <a href="https://paseoproject.org" class="link-fancy" target="_blank"><i class="fa-solid fa-globe" aria-hidden="true"></i></a></h3>
            </div>
          </div>
          <div class="image_wrapper">
            <a href="https://albuquerquerecycling.net" class="link-fancy mobile-only" target="_blank"><img src="/img/partners/abq-computer-electronics-recycling.png" class="w-100 shadow-1-strong rounded mb-2" alt="Albuquerque Computer & Electronics Recycling Co."></a>
            <div class="overlay overlay_3 overlay-partner white-text">
              <h3 class="partner-title">Albuquerque Computer & Electronics Recycling Co.</h3>
              <br>
              <h3 class="partner-social"><a href="https://albuquerquerecycling.net" class="link-fancy" target="_blank"><i class="fa-solid fa-globe" aria-hidden="true"></i></a></h3>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

      </main>
    <footer>
	<div id="footer-items-column" class="container-100 text-center initialism py-vh-3 row no-bs-gutter">
		<div class="text-left col-5">
		<span>(ɔ) DUST WAVE</span>
		</div>
		<div class="col-2">
		<a href="https://instagram.com/waveofdust" class="link-fancy" target="_blank"><i class="fa-brands fa-instagram" aria-hidden="true"></i></a><span> | </span>
		<a href="https://www.youtube.com/@dustwavecollective/videos" class="link-fancy" target="_blank"><i class="fa-brands fa-youtube" aria-hidden="true"></i></a><span> | </span>
		<a href="https://www.tiktok.com/@waveofdust" class="link-fancy" target="_blank"><i class="fa-brands fa-tiktok" aria-hidden="true"></i></a>
		</div>
		<div class="col-5">
			<a class="link-fancy" href="/newsletter.html"><span>NEWSLETTER</span></a>
		</div>
	</div>
	
	<div class="wrap">
		<div id="popup" class="lazyload">
			<div class="popup-content">
				<div id="mc_embed_signup">
					<form action="https://xyz.us14.list-manage.com/subscribe/post?u=7a2a4faf1a54a4506c472a35a&amp;id=cd4dd93beb&amp;f_id=00deb5e0f0" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
						<div id="mc_embed_signup_scroll">
						<h5 class="gambado">Keep up with all our shenanigans</h5>
				<div class="mc-field-group">
					<label for="mce-EMAIL">Email Address  <span class="asterisk">*</span>
				</label>
					<input type="email" value="" required aria-required="true" autocomplete="email" inputmode="email" autocapitalize="off" spellcheck="false" name="EMAIL" class="required email" id="mce-EMAIL" required>
					<span id="mce-EMAIL-HELPERTEXT" class="helper_text"></span>
				</div>
				<div hidden="true"><input type="hidden" name="tags" value="7333681"></div>
					<div id="mce-responses" class="clear foot">
						<div class="response" id="mce-error-response" style="display:none"></div>
						<div class="response" id="mce-success-response" style="display:none"></div>
					</div>    
					<div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_7a2a4faf1a54a4506c472a35a_cd4dd93beb" tabindex="-1" value=""></div>
						<div class="optionalParent">
							<div class="clear foot">
								<input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="button">
								<p class="brandingLogo"><a href="http://eepurl.com/ini0wg" title="Mailchimp - email marketing made easy and fun"><img src="https://eep.io/mc-cdn-images/template_images/branding_logo_text_light_dtp.svg"></a></p>
							</div>
						</div>
					</div>
				</form>
			</div>
			<button id="close-btn" class="close-btn">X</button>
		</div>
		<script type="text/javascript" src="//s3.amazonaws.com/downloads.mailchimp.com/js/mc-validate.js"></script>
		<script type="text/javascript">
			(function($) {window.fnames = new Array(); window.ftypes = new Array();fnames[0]='EMAIL';ftypes[0]='email';fnames[1]='FNAME';ftypes[1]='text';fnames[2]='LNAME';ftypes[2]='text';fnames[3]='ADDRESS';ftypes[3]='address';fnames[4]='PHONE';ftypes[4]='phone';fnames[5]='BIRTHDAY';ftypes[5]='birthday';fnames[6]='MMERGE6';ftypes[6]='text';}(jQuery));var $mcj = jQuery.noConflict(true);
		</script>
	</div>

	
	<script src="https://cdnjs.cloudflare.com/ajax/libs/quicklink/2.3.0/quicklink.umd.js"></script>
	<script src="/js/bootstrap.bundle.min.js"></script>

	
	<script>
	/* =========================================================================
	1) Mailchimp popup (delayed show + close)
	========================================================================= */
	(() => {
	const popup   = document.getElementById('popup');
	const closeBtn = document.getElementById('close-btn');

	// Show after 60s (if markup exists)
	if (popup) setTimeout(() => popup.classList.add('show'), 60000);

	// Close handler (if markup exists)
	if (popup && closeBtn) {
		closeBtn.addEventListener('click', () => popup.classList.remove('show'));
	}
	})();

	/* =========================================================================
	2) Home-page glitch loop
	- Runs only when <body class="test"> is present and #glitch-target exists
	========================================================================= */
	(() => {
	if (!document.body.classList.contains('test')) return;

	function startGlitchLoop(target) {
		if (!target) return;

		const triggerGlitch = (ms = Math.random() * 250 + 100) => {
		if (!target.classList.contains('glitching')) {
			target.classList.add('glitching');
			setTimeout(() => target.classList.remove('glitching'), ms);
		}
		};

		// periodic loop (2–4s)
		const intervalId = setInterval(() => triggerGlitch(), 2000 + Math.random() * 2000);

		// random extra loop (8–16s)
		let randomTimeoutId = null;
		(function randomLoop() {
		if (Math.random() < 0.2) triggerGlitch();
		randomTimeoutId = setTimeout(randomLoop, Math.random() * 8000 + 8000);
		})();

		// gesture triggers — capture if body
		const isBody = target === document.body;
		const clickOpts = isBody ? { capture: true } : undefined;
		const touchOpts = isBody ? { capture: true, passive: true } : { passive: true };

		target.addEventListener('click',      () => triggerGlitch(200), clickOpts);
		target.addEventListener('touchstart', () => triggerGlitch(200), touchOpts);

		// tidy up on page hide
		window.addEventListener('pagehide', () => {
		clearInterval(intervalId);
		if (randomTimeoutId) clearTimeout(randomTimeoutId);
		}, { once: true });
	}

	// Start when DOM is ready
	const go = () => startGlitchLoop(document.getElementById('glitch-target'));
	(document.readyState === 'loading')
		? document.addEventListener('DOMContentLoaded', go, { once:true })
		: go();
	})();

	/* =========================================================================
	3) quicklink prefetch (safe guard)
	========================================================================= */
	(() => {
	window.addEventListener('load', () => {
		if (window.quicklink && typeof quicklink.listen === 'function') {
		// Ignore any links inside audio cards (prevents early audio/network fetches)
		const ignoreAudioCardLinks = (uri, elem) =>
			!!elem?.closest?.('.audio-card');

		// Also ignore explicit download links
		const ignoreDownloads = (uri, elem) =>
			!!(elem?.hasAttribute?.('download') || elem?.classList?.contains('download'));

		quicklink.listen({
			ignores: [ignoreAudioCardLinks, ignoreDownloads]
		});
		}
	});
	})();

	/* =========================================================================
	4) Lite YouTube — upgrade iframes to click-to-load
	========================================================================= */
	(() => {
	'use strict';

	function makeLiteFromIframe(ifr) {
		const src = ifr.getAttribute('src') || '';
		const match = src.match(/\/embed\/([a-zA-Z0-9_-]{6,})/);
		const vid = match && match[1];
		if (!vid) return;

		const title  = ifr.getAttribute('title') || 'YouTube video';
		const poster = `https://i.ytimg.com/vi/${vid}/hqdefault.jpg`;

		const ratio = document.createElement('div');
		ratio.className = 'embed-lite__ratio';

		const btn = document.createElement('button');
		btn.type = 'button';
		btn.className = 'embed-lite';
		btn.setAttribute('aria-label', `Play video: ${title}`);
		btn.innerHTML =
		`<img class="embed-lite__thumb" alt="" loading="lazy" decoding="async" src="${poster}">` +
		`<span class="embed-lite__play" aria-hidden="true"></span>`;

		btn.addEventListener('click', () => {
		const real = document.createElement('iframe');
		real.className = 'embed-lite__iframe';
		real.setAttribute('allowfullscreen', '');
		real.setAttribute('title', title);
		real.setAttribute('loading', 'eager');
		real.referrerPolicy = 'strict-origin-when-cross-origin';
		const sep = src.includes('?') ? '&' : '?';
		real.src = `${src}${sep}autoplay=1`;
		real.allow = 'accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share';
		ratio.replaceChild(real, btn);
		}, { once:true });

		ratio.appendChild(btn);
		ifr.parentNode.replaceChild(ratio, ifr);
	}

	function upgradeAll() {
		document
		.querySelectorAll('iframe[src*="youtube.com/embed/"], iframe[src*="youtube-nocookie.com/embed/"]')
		.forEach(makeLiteFromIframe);
	}

	(document.readyState === 'loading')
		? document.addEventListener('DOMContentLoaded', upgradeAll, { once:true })
		: upgradeAll();
	})();

	/* =========================================================================
	5) Fast column balancer (moves .card.pending into two columns)
	========================================================================= */
	(() => {
	'use strict';

	const sectionEls = (id) => {
		const section = document.getElementById(id);
		if (!section) return {};
		return {
		section,
		left:  section.querySelector('.col-left'),
		right: section.querySelector('.col-right')
		};
	};

	const estimateCardHeight = (card) => {
		const h = card.getBoundingClientRect().height;
		if (h && h > 0) return h;
		if (card.querySelector('.embed-container, iframe')) return 420;
		return 260;
	};

	const balanceColumns = (sectionId) => {
		const { section, left, right } = sectionEls(sectionId);
		if (!section || !left || !right) return;

		const cards = Array.from(section.querySelectorAll('.card.pending'));
		if (!cards.length) return;

		const items = cards.map(c => ({ el: c, h: estimateCardHeight(c) }));

		const fragL = document.createDocumentFragment();
		const fragR = document.createDocumentFragment();
		let leftH = 0, rightH = 0;

		for (const it of items) {
		if (leftH <= rightH) { fragL.appendChild(it.el); leftH += it.h; }
		else                  { fragR.appendChild(it.el); rightH += it.h; }
		}

		left.textContent = '';
		right.textContent = '';
		left.appendChild(fragL);
		right.appendChild(fragR);

		requestAnimationFrame(() => items.forEach(it => it.el.classList.remove('pending')));
	};

	const init = () => ['articles-grid','av-grid','trailers-grid']
		.filter((id, i, arr) => arr.indexOf(id) === i)
		.forEach(balanceColumns);

	(document.readyState === 'loading')
		? document.addEventListener('DOMContentLoaded', init, { once:true })
		: init();

	// tiny public hook (unchanged)
	window.DWBalance = { rebalance: balanceColumns };
	})();

	/* =========================================================================
	6) Digest TOC builder
	========================================================================= */
	(() => {
	const onReady = () => {
		const tocBody = document.getElementById('digest-toc-body');
		if (!tocBody) return;

		const slugify = s => (s || '')
		.toLowerCase().replace(/<[^>]+>/g,'')
		.replace(/&[a-z]+;?/g,'')
		.replace(/[^a-z0-9]+/g,'-')
		.replace(/(^-|-$)/g,'').slice(0,80);

		const makeListSection = (titleText) => {
		const wrap = document.createElement('section');
		const h = document.createElement('h3');
		h.className = 'gambado mb-2';
		h.textContent = titleText;
		const ul = document.createElement('ul');
		ul.className = 'digest-toc__list';
		wrap.append(h, ul);
		return { wrap, ul };
		};

		const addItem = (ul, href, text) => {
		const li = document.createElement('li');
		li.className = 'digest-toc__item';
		const a = document.createElement('a');
		a.href = href;
		a.className = 'digest-toc__link';
		a.textContent = text;
		li.appendChild(a);
		ul.appendChild(li);
		};

		// Articles
		const articleCards = Array.from(document.querySelectorAll('#articles-grid .digest-card'));
		if (articleCards.length) {
		const { wrap, ul } = makeListSection('Articles');
		articleCards.forEach(card => {
			const prev = card.previousElementSibling;
			const anchorName = (prev && prev.tagName === 'A' && prev.hasAttribute('name')) ? prev.getAttribute('name') : null;
			const titleA = card.querySelector('h4 a');
			const titleText = titleA ? titleA.textContent.trim() : 'Untitled';
			if (!anchorName && !card.id) card.id = slugify(titleText) || ('article-' + Math.random().toString(36).slice(2,8));
			addItem(ul, anchorName ? ('#' + anchorName) : ('#' + card.id), titleText);
		});
		tocBody.appendChild(wrap);
		}

		// Podcasts & Videos
		const avGrid = document.getElementById('av-grid');
		if (avGrid) {
		const cards = Array.from(avGrid.querySelectorAll('.digest-card'));
		if (cards.length) {
			const { wrap, ul } = makeListSection('Podcasts & Videos');
			cards.forEach((card, idx) => {
			const titleA = card.querySelector('h4 a');
			const titleText = titleA ? titleA.textContent.trim() : ('A/V Item ' + (idx+1));
			if (!card.id) card.id = slugify(titleText) || ('av-' + Math.random().toString(36).slice(2,8));
			addItem(ul, '#' + card.id, titleText);
			});
			tocBody.appendChild(wrap);
		}
		}

		// Trailers anchor
		(() => {
		const trailersAnchor = document.querySelector('a[name="trailers"]');
		const trailersTarget = trailersAnchor ? '#trailers' : (document.getElementById('trailers-grid') ? '#trailers-grid' : null);
		if (!trailersTarget) return;

		const wrap = document.createElement('section');
		const h = document.createElement('h3');
		h.className = 'gambado mb-2';
		const a = document.createElement('a');
		a.href = trailersTarget;
		a.className = 'digest-toc__link';
		a.textContent = 'Trailers';
		h.appendChild(a);
		wrap.appendChild(h);
		tocBody.appendChild(wrap);
		})();
	};

	(document.readyState === 'loading')
		? document.addEventListener('DOMContentLoaded', onReady, { once:true })
		: onReady();
	})();

	/* =========================================================================
	7) To-Do lists: tag + toggle
	========================================================================= */
	(() => {
	const onReady = () => {
		// Tag lists following "To-Dos" / "DIY To-Dos"
		document.querySelectorAll('p > strong').forEach((strong) => {
		const txt = (strong.textContent || '').trim().toLowerCase();
		if (txt === 'to-dos' || txt === 'diy to-dos') {
			const p = strong.closest('p');
			const ul = p && p.nextElementSibling;
			if (ul && ul.tagName === 'UL') ul.classList.add('todo-list');
		}
		});

		// Toggle checked state
		document.querySelectorAll('.todo-list li').forEach(li => {
		li.addEventListener('click', () => li.classList.toggle('checked'));
		});
	};

	(document.readyState === 'loading')
		? document.addEventListener('DOMContentLoaded', onReady, { once:true })
		: onReady();
	})();

	/* =========================================================================
	8) Equalize grid row heights (desktop only)
	- Keeps row pairs the same height after content settles
	========================================================================= */
	(() => {
	const DESKTOP_BP = 992;
	const qsa = (sel, root=document) => Array.from(root.querySelectorAll(sel));

	function equalizeGridRows(gridId) {
		const grid = document.getElementById(gridId);
		if (!grid) return;

		const leftCards  = qsa('.col-left  .digest-card', grid);
		const rightCards = qsa('.col-right .digest-card', grid);

		// clear first
		[...leftCards, ...rightCards].forEach(c => c.style.minHeight = '');

		if (window.innerWidth < DESKTOP_BP) return;

		const maxLen = Math.max(leftCards.length, rightCards.length);
		for (let i = 0; i < maxLen; i++) {
		const L = leftCards[i];
		const R = rightCards[i];
		if (!L && !R) continue;

		const h = Math.max(L ? L.offsetHeight : 0, R ? R.offsetHeight : 0);
		if (L) L.style.minHeight = h + 'px';
		if (R) R.style.minHeight = h + 'px';
		}
	}

	const equalizeAll = () => requestAnimationFrame(() => {
		equalizeGridRows('articles-grid');
		equalizeGridRows('av-grid');
	});

	// Debounced resize
	let resizeTO = null;
	window.addEventListener('resize', () => {
		clearTimeout(resizeTO);
		resizeTO = setTimeout(equalizeAll, 120);
	});

	// Run after DOM & fonts; again on window load; watch grid mutations
	const onReady = () => {
		const whenFonts = (document.fonts && document.fonts.ready) ? document.fonts.ready : Promise.resolve();
		whenFonts.then(() => {
		equalizeAll();
		window.addEventListener('load', equalizeAll, { once: true });

		const grids = ['articles-grid', 'av-grid']
			.map(id => document.getElementById(id))
			.filter(Boolean);

		const mo = new MutationObserver(equalizeAll);
		grids.forEach(g => mo.observe(g, { childList: true, subtree: true }));
		});
	};

	(document.readyState === 'loading')
		? document.addEventListener('DOMContentLoaded', onReady, { once:true })
		: onReady();
	})();

	/* =========================================================================
	9) AUDIO: unlock & safe play helpers (global hooks preserved)
	========================================================================= */
	(() => {
	let unlocked = false;
	const pending = [];

	function flushPending() {
		while (pending.length) { try { pending.shift()(); } catch {} }
	}

	async function unlock() {
		if (unlocked) return;
		unlocked = true;

		// Resume WebAudio (if used by WS)
		try {
		if (window.AudioContext || window.webkitAudioContext) {
			const ctx = window.__dgAudioCtx || new (window.AudioContext || window.webkitAudioContext)();
			window.__dgAudioCtx = ctx;
			if (ctx.state === 'suspended') { await ctx.resume().catch(()=>{}); }
		}
		} catch {}

		flushPending();

		// stop listening once unlocked
		['pointerdown','touchstart','keydown'].forEach(t =>
		document.removeEventListener(t, unlock, true)
		);
	}

	// Arm unlock early (capture)
	['pointerdown','touchstart','keydown'].forEach(t =>
		document.addEventListener(t, unlock, true)
	);

	// Public helpers (as before)
	window.__safePlay = (fn) => { if (unlocked) { try { fn(); } catch {} } else { pending.push(fn); } };
	window.__safeMediaPlay = (media) => { if (media) window.__safePlay(() => media.play().catch(()=>{})); };
	})();

	/* =========================================================================
	10) AUDIO player — WaveSurfer wiring (unchanged behavior, tidied)
	========================================================================= */
	(() => {
	const WAVESURFER_CDN = "https://unpkg.com/wavesurfer.js@7/dist/wavesurfer.min.js";

	// ----- utils -----
	function ensureWavesurferLoaded() {
		return new Promise((resolve, reject) => {
		if (window.WaveSurfer) return resolve();
		const s = document.createElement("script");
		s.src = WAVESURFER_CDN;
		s.async = true;
		s.onload = () => resolve();
		s.onerror = () => reject(new Error("Failed to load WaveSurfer"));
		document.head.appendChild(s);
		});
	}
	const getVar = (name, fallback) => {
		const v = getComputedStyle(document.documentElement).getPropertyValue(name).trim();
		return v || fallback;
	};
	function hardenControl(btn) {
		if (!btn) return;
		if (btn.tagName === 'A') {
		const b = document.createElement('button');
		b.type = 'button';
		b.className = btn.className;
		b.innerHTML = btn.innerHTML;
		[...btn.attributes].forEach(a => { if (!['href','role'].includes(a.name)) b.setAttribute(a.name, a.value); });
		btn.replaceWith(b);
		btn = b;
		} else if (btn.tagName === 'BUTTON' && btn.type !== 'button') {
		btn.type = 'button';
		}
		btn.style.touchAction = 'manipulation';
		btn.addEventListener('mousedown', (e) => { e.preventDefault(); }, { passive: false });
		btn.addEventListener('click', (e) => { e.stopPropagation(); });
		if (btn.getAttribute('tabindex') === '-1') btn.removeAttribute('tabindex');
		return btn;
	}
	function bindThrottled(el, type, fn, key, ms = 180) {
		if (!el) return;
		const k = `__bound_${type}_${key}`;
		if (el[k]) return;
		let last = 0;
		const wrapped = (e) => {
		const now = performance.now();
		if (now - last < ms) return;
		last = now;
		fn(e);
		};
		el.addEventListener(type, wrapped);
		el[k] = wrapped;
	}

	// anti-autoscroll focus guard (kept)
	let lastInputWasKeyboard = false;
	window.addEventListener('keydown', () => { lastInputWasKeyboard = true; }, { capture: true });
	['pointerdown','mousedown','touchstart'].forEach(t =>
		window.addEventListener(t, () => { lastInputWasKeyboard = false; }, { capture: true })
	);
	document.addEventListener('focusin', (e) => {
		if (lastInputWasKeyboard) return;
		const t = e.target;
		if (!(t instanceof HTMLElement)) return;
		if (t.closest('.audio-card .controls')) t.blur();
	}, { capture: true });

	function ensureArtCol(card) {
		const topImg = card.querySelector(":scope > img");
		let col = card.querySelector(":scope > .art-col");
		if (!col) {
		col = document.createElement("div");
		col.className = "art-col";
		if (topImg) { topImg.replaceWith(col); col.appendChild(topImg); }
		else { card.insertAdjacentElement("afterbegin", col); }
		} else if (topImg && !col.contains(topImg)) {
		col.insertAdjacentElement("afterbegin", topImg);
		}
		return col;
	}

	function skipSeconds(ws, deltaSec) {
		if (!ws) return;
		const d = ws.getDuration();
		if (!d || !isFinite(d)) return;
		const t = ws.getCurrentTime();
		const next = Math.max(0, Math.min(d - 0.01, t + deltaSec));
		ws.seekTo(next / d);
	}

	function zoomWaveToContainer(ws, el) {
		const dur = ws.getDuration() || 0;
		if (!el || dur <= 0) return;
		const pxPerSec = el.clientWidth / dur;
		ws.setOptions?.({ minPxPerSec: Math.max(0.001, pxPerSec) });
		ws.zoom?.(pxPerSec);
	}
	function observeWaveResize(ws, el) {
		if (!window.ResizeObserver) return;
		const ro = new ResizeObserver(() => zoomWaveToContainer(ws, el));
		ro.observe(el);
		el.__wsRO = ro;
	}

	const fmt = (t) => {
		if (!isFinite(t)) return '0:00';
		const s = Math.max(0, Math.floor(t));
		const m = Math.floor(s/60), r = s%60;
		return m + ':' + String(r).padStart(2,'0');
	};
	function setupHoverTooltip(el, ws){
		const tip = document.createElement('div');
		tip.className = 'ws-hover';
		el.appendChild(tip);
		const update = (e) => {
		const rect = el.getBoundingClientRect();
		const clientX = (e.touches ? e.touches[0].clientX : e.clientX);
		const x = Math.min(Math.max(clientX - rect.left, 0), rect.width);
		const dur = ws.getDuration() || 0;
		const time = dur ? (x / rect.width * dur) : 0;
		tip.style.left = x + 'px';
		tip.textContent = fmt(time);
		};
		el.addEventListener('mousemove',  (e) => { tip.style.display='block'; update(e); });
		el.addEventListener('mouseleave', () => { tip.style.display='none'; });
		el.addEventListener('touchstart', (e) => { tip.style.display='block'; update(e); }, {passive:true});
		el.addEventListener('touchmove',  (e) => { update(e); }, {passive:true});
		el.addEventListener('touchend',   () => { tip.style.display='none'; });
	}

	function wireControls(card, ws) {
		const ctrls = card.querySelector('.controls');
		if (!ctrls) return;

		// Ensure play/pause exists & hardened
		let ppBtn = ctrls.querySelector('.playpause');
		if (!ppBtn) {
		ppBtn = document.createElement('button');
		ppBtn.className = 'playpause';
		ppBtn.type = 'button';
		ppBtn.setAttribute('aria-label', 'Play');
		ctrls.insertBefore(ppBtn, ctrls.firstChild);
		}
		(function harden(btn){
		if (!btn) return;
		if (btn.tagName === 'A') {
			const b = document.createElement('button');
			b.type = 'button'; b.className = btn.className; b.innerHTML = btn.innerHTML;
			[...btn.attributes].forEach(a => { if (!['href','role'].includes(a.name)) b.setAttribute(a.name, a.value); });
			btn.replaceWith(b); btn = b;
		} else if (btn.tagName === 'BUTTON' && btn.type !== 'button') { btn.type = 'button'; }
		btn.style.touchAction = 'manipulation';
		btn.addEventListener('mousedown', (e) => { e.preventDefault(); }, { passive:false });
		btn.addEventListener('click', (e) => { e.stopPropagation(); });
		if (btn.getAttribute('tabindex') === '-1') btn.removeAttribute('tabindex');
		return btn;
		})(ppBtn);

		const svgPlay  = `<svg viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M8 5v14l11-7z"></path></svg>`;
		const svgPause = `<svg viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M6 5h4v14H6zm8 0h4v14h-4z"></path></svg>`;
		const setState = (playing) => {
		ppBtn.setAttribute('data-state', playing ? 'playing' : 'paused');
		ppBtn.innerHTML = playing ? svgPause : svgPlay;
		ppBtn.setAttribute('aria-label', playing ? 'Pause' : 'Play');
		};
		setState(false);

		bindThrottled(ppBtn, 'click', () => {
		if (ws) {
			// 🔧 CHANGED: lazy-attach audio src on first play
			const mediaEl = ws.getMediaElement ? ws.getMediaElement() : null;           // 🔧
			const waveEl  = ws.getWrapper ? ws.getWrapper() : null;                     // 🔧
			const audioUrl = waveEl?.dataset?.audioSrc;                                 // 🔧

			if (ws.isPlaying()) {
			ws.pause();
			return;
			}

			if (mediaEl && !mediaEl.src && audioUrl) {                                  // 🔧
			mediaEl.preload = 'none';                                                 // 🔧
			mediaEl.src = audioUrl;                                                   // 🔧
			try { mediaEl.load(); } catch {}                                          // 🔧
			const start = () => { window.__safePlay?.(() => ws.play()); };            // 🔧
			if (mediaEl.readyState >= 2) start();                                     // 🔧
			else {
				const onReady = () => { mediaEl.removeEventListener('canplay', onReady); start(); };
				mediaEl.addEventListener('canplay', onReady, { once: true });
			}
			return;
			}

			window.__safePlay?.(() => ws.play());
			return;
		}
		// Fallback to hidden <audio> pre-WS
		const media = card.querySelector('audio');
		if (media) {
			if (media.paused) window.__safeMediaPlay?.(media);
			else try { media.pause(); } catch {}
		}
		}, 'pp');

		ws.on('play',   () => setState(true));
		ws.on('pause',  () => setState(false));
		ws.on('finish', () => setState(false));

		// Skip buttons
		let backBtn = hardenControl(ctrls.querySelector(".skip-back"));
		let fwdBtn  = hardenControl(ctrls.querySelector(".skip-fwd"));
		if (backBtn) bindThrottled(backBtn, "click", () => skipSeconds(ws, -10), "ws-skipback");
		if (fwdBtn)  bindThrottled(fwdBtn,  "click", () => skipSeconds(ws, +30), "ws-skipfwd");

		// Speed pill
		let speedBtn = hardenControl(ctrls.querySelector("[data-audio-speed]"));
		if (speedBtn) {
		const rates = [1, 1.1, 1.25, 1.5, 2, 0.5];
		const advanceRate = () => {
			const current = ws.getPlaybackRate ? ws.getPlaybackRate() : 1;
			const idx = rates.indexOf(current);
			const next = rates[(idx + 1) % rates.length];
			ws.setPlaybackRate(next);
			speedBtn.textContent = `${next}x`;
			speedBtn.setAttribute('aria-live', 'polite');
			speedBtn.setAttribute('aria-label', `Playback speed: ${next}x`);
		};
		bindThrottled(speedBtn, "click",  advanceRate, "ws-speed-click");
		bindThrottled(speedBtn, "keydown",(e) => {
			if (e.key === "Enter" || e.key === " ") { e.preventDefault(); advanceRate(); }
		}, "ws-speed-key");
		speedBtn.textContent = "1x";
		if (!speedBtn.__bound_playbackRate) {
			ws.on?.("playback-rate", (r) => { speedBtn.textContent = `${r}x`; });
			speedBtn.__bound_playbackRate = true;
		}
		}

		// Download (don’t bubble)
		const dl = ctrls.querySelector('.download');
		if (dl && !dl.__bound_dl) {
		dl.addEventListener('click', (e) => e.stopPropagation());
		dl.style.touchAction = 'manipulation';
		dl.__bound_dl = true;
		}
	}

	async function createWaveForCard(card, opts={eager:false}) {
		const waveEl = card.querySelector(".wave");
		if (!waveEl || waveEl.dataset.wsReady === "1") return;

		const url = waveEl.dataset.audioSrc;
		if (!url) return;

		ensureArtCol(card);

		// hidden <audio> to enable play; keep MP3 off the wire until needed
		let media = card.querySelector('audio[id]');
		if (!media) {
			media = document.createElement('audio');
			media.src = url;
			media.preload = opts.eager ? 'metadata' : 'none'; // ← key change
			media.crossOrigin = 'anonymous';
			media.playsInline = true;
			media.style.display = 'none';
			waveEl.insertAdjacentElement('afterend', media);
		} else {
			media.preload = opts.eager ? 'metadata' : (media.preload || 'none');
			media.crossOrigin = media.crossOrigin || 'anonymous';
		}

		// skeleton + fallback progress + overlay
		waveEl.classList.add("wave--skeleton","wave--fallback","wave--loading");
		const fb   = document.createElement('div');  fb.className = 'fallback-bar';
		const hint = document.createElement('button'); hint.className = 'play-hint'; hint.textContent = 'Play Now';
		hardenControl(hint);

		// coordinate with scroll squelch (Arc/Safari)
		['pointerdown','mousedown','touchstart'].forEach(t =>
			hint.addEventListener(t, () => {
			window.__armAudioSquelch?.();
			const ae = document.activeElement;
			if (ae && ae !== document.body && ae !== hint) { try { ae.blur(); } catch {} }
			}, { capture: true, passive: true })
		);

		hint.addEventListener('click', (e) => {
			e.preventDefault(); e.stopPropagation();
			// allow audio to load now that user interacted
			media.preload = 'auto'; try { media.load?.(); } catch {}
			window.__safeMediaPlay(media);
			try { if (card._ws && !card._ws.isPlaying()) card._ws.play(); } catch {}
			hint.classList.add('hidden');
			setTimeout(() => hint.remove(), 300);
		});

		const overlay = document.createElement('div');
		overlay.className = 'wave__overlay';
		overlay.addEventListener('wheel',      (e) => e.preventDefault(), { passive:false });
		overlay.addEventListener('touchmove',  (e) => e.preventDefault(), { passive:false });

		waveEl.append(fb, hint, overlay);

		const updateFallback = () => {
			const d = media.duration || 0;
			const t = media.currentTime || 0;
			const p = d > 0 ? Math.min(1, Math.max(0, t / d)) : 0;
			fb.style.transform = `scaleX(${p})`;
		};
		media.addEventListener('timeupdate',      updateFallback);
		media.addEventListener('loadedmetadata',  updateFallback);
		media.addEventListener('progress',        updateFallback);

		// ── NEW: fetch peaks and wait for them before creating WS ─────────────
		let precomputedPeaks = undefined;
		const peaksUrl = waveEl.dataset.peaksSrc;
		if (peaksUrl) {
			try {
			// default cache behavior is fine; 'force-cache' can mask updates
			const res = await fetch(peaksUrl, { cache: 'default' });
			if (res.ok) {
				const j = await res.json();
				precomputedPeaks = j.data || j.samples || j.peaks || undefined;
			}
			} catch {}
		}
		// ──────────────────────────────────────────────────────────────────────

		const ws = WaveSurfer.create({
			container: waveEl,
			media,
			height: Math.round(parseFloat(getComputedStyle(document.documentElement).getPropertyValue("--audio-h")) * 0.6),
			waveColor:     getVar("--wave-backdrop", "rgba(255,255,255,.2)"),
			progressColor: getVar("--wave-progress", "#f2f2f2"),
			cursorColor:   getVar("--wave-cursor", "#ffd54d"),
			cursorWidth: 2,
			barWidth: 2,
			barGap: 1.5,
			barRadius: 2,
			dragToSeek: false,
			interact: true,
			normalize: true,
			minPxPerSec: 0.001,
			autoplay: false,
			hideScrollbar: true,
			fillParent: true,
			autoCenter: false,
			autoScroll: false,
			peaks: precomputedPeaks // ← will be undefined if not found
		});

		waveEl.dataset.wsReady = "1";
		ws.setPlaybackRate?.(1);

		ws.on('ready', () => {
			zoomWaveToContainer(ws, waveEl);
			observeWaveResize(ws, waveEl);
			waveEl.classList.remove("wave--skeleton","wave--fallback","wave--loading");
			try { fb.remove(); hint.remove(); overlay.remove(); } catch {}
			media.removeEventListener('timeupdate',     updateFallback);
			media.removeEventListener('loadedmetadata', updateFallback);
			media.removeEventListener('progress',       updateFallback);
			setupHoverTooltip(waveEl, ws);
		});
		ws.on('error', () => {
			waveEl.classList.remove("wave--skeleton","wave--fallback","wave--loading");
			try { fb.remove(); hint.remove(); overlay.remove(); } catch {}
		});

		wireControls(card, ws);

		// reattach per-card squelch if global hook present
		try { document.querySelectorAll('.audio-card').forEach(window.__AudioSquelchAttach?.bind(null) || (()=>{})); } catch {}

		card._ws = ws;
	}

	async function boot() {
		try { await ensureWavesurferLoaded(); }
		catch (e) { console.error(e); return; }

		const cards = Array.from(document.querySelectorAll(".audio-card"));
		if (!cards.length) return;

		// Eager init first two (still eager UI, but no audio fetch until Play)
		const eagerCount = Math.min(2, cards.length);
		for (let i = 0; i < eagerCount; i++) createWaveForCard(cards[i], { eager:true });

		// IO preload others
		if ("IntersectionObserver" in window) {
		const io = new IntersectionObserver((entries, obs) => {
			entries.forEach((entry) => {
			if (entry.isIntersecting) { createWaveForCard(entry.target, { eager:false }); obs.unobserve(entry.target); }
			});
		}, { rootMargin: "800px 0px" });
		cards.slice(eagerCount).forEach((card) => io.observe(card));
		} else {
		cards.forEach((c, idx) => createWaveForCard(c, { eager: idx < eagerCount }));
		}

		window.addEventListener("pagehide", () => {
		cards.forEach((card) => {
			const ws = card._ws;
			if (ws && ws.destroy) { try { ws.destroy(); } catch {} }
			const waveEl = card.querySelector('.wave');
			if (waveEl?.__wsRO) { try { waveEl.__wsRO.disconnect(); } catch {} }
		});
		});
	}

	(document.readyState === "loading")
		? document.addEventListener("DOMContentLoaded", boot, { once: true })
		: boot();

	// public reinit (unchanged contract)
	window.DWDigestAudio = {
		reinit() {
		document.querySelectorAll(".audio-card .wave").forEach(w => { w.dataset.wsReady = "0"; });
		try { document.querySelectorAll('.audio-card').forEach(window.__AudioSquelchAttach?.bind(null) || (()=>{})); } catch {}
		boot();
		}
	};
	})();

	/* =========================================================================
	11) Scroll squelch to prevent UA autoscroll when clicking audio controls
	========================================================================= */
	(() => {
	let squelchUntil = 0;
	const ARM_MS = 500;
	const now = () => performance.now();

	function armSquelch() {
		squelchUntil = now() + ARM_MS;
		// Disable scroll anchoring during the window
		document.documentElement.style.overflowAnchor = 'none';
		clearTimeout(armSquelch._t);
		armSquelch._t = setTimeout(() => {
		document.documentElement.style.overflowAnchor = '';
		}, ARM_MS + 50);
	}
	function isSquelched() { return now() < squelchUntil; }

	// Guard the big 3
	const _scrollTo = window.scrollTo.bind(window);
	window.scrollTo = function() { if (isSquelched()) return; return _scrollTo(...arguments); };

	const _scrollBy = window.scrollBy.bind(window);
	window.scrollBy = function() { if (isSquelched()) return; return _scrollBy(...arguments); };

	const _siv = Element.prototype.scrollIntoView;
	Element.prototype.scrollIntoView = function() { if (isSquelched()) return; return _siv.apply(this, arguments); };

	// Blur focus pre-handlers on control interactions
	function attachSquelchToCard(card) {
		const ctrls = card.querySelectorAll('.controls .playpause, .controls button, .controls [data-audio-speed]');
		ctrls.forEach(btn => {
		['pointerdown','mousedown','touchstart'].forEach(t =>
			btn.addEventListener(t, () => {
			armSquelch();
			const ae = document.activeElement;
			if (ae && ae !== document.body && ae !== btn) { try { ae.blur(); } catch {} }
			}, { passive: true, capture: true })
		);
		btn.addEventListener('click', () => { armSquelch(); }, { passive: true, capture: true });
		});
	}

	// Prevent focus from sticking on controls while squelched
	document.addEventListener('focusin', (e) => {
		if (!isSquelched()) return;
		const t = e.target;
		if (t instanceof HTMLElement && t.closest('.audio-card .controls')) {
		try { t.blur(); } catch {}
		}
	}, { capture: true });

	// Apply to existing + expose for future
	document.querySelectorAll('.audio-card').forEach(attachSquelchToCard);
	window.__AudioSquelchAttach = attachSquelchToCard;

	// Export armer so Play-hint can call it
	window.__armAudioSquelch = armSquelch;
	})();
	</script>
</div></footer>
  </body>
</html>
